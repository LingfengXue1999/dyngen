---
output:
  github_document:
    html_preview: false
editor_options: 
  chunk_output_type: console
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.path = "man/figures/README_", warning=FALSE, message=FALSE, error=FALSE, echo = TRUE)

library(tidyverse)
submission_to_cran <- FALSE
```

# dyngen
[![CRAN Status](https://www.r-pkg.org/badges/version/dyngen)](https://cran.r-project.org/package=dyngen)
[![CRAN Downloads](https://cranlogs.r-pkg.org/badges/dyngen)](https://cran.r-project.org/package=dyngen)
[![DOI](https://img.shields.io/badge/doi-10.1101/2020.02.06.936971-green)](https://doi.org/10.1101/2020.02.06.936971)
![R-CMD-check](https://github.com/dynverse/dyngen/workflows/R-CMD-check/badge.svg)<br><img src="man/figures/logo.png" align="right" />

dyngen is a novel, multi-modal simulation engine for studying dynamic cellular processes at single-cell resolution. dyngen is more flexible than current single-cell simulation engines, and allows better method development and benchmarking, thereby stimulating development and testing of novel computational methods.

A preprint is available on [bioRxiv](https://doi.org/10.1101/2020.02.06.936971). Run `citation("dyngen")` to obtain the corresponding citation information. All source code for reproducing the results in this manuscript are available on [GitHub](https://github.com/dynverse/dyngen_manuscript).

## System requirements
This package is supported for Linux, but should also work on Mac OS X and Windows. It has been tested with [Github Actions](https://github.com/dynverse/dyngen/actions?query=workflow%3AR-CMD-check) for R 3.5, 3.6 and 4.0 on the following systems Ubuntu, Windows Server and Mac OS X.

## Installation

## Step 1: Install from CRAN or GitHub
dyngen is available on CRAN, so you can install it with the following command.
```r
install.packages("dyngen")
```

If you would like to install the development version of dyngen from GitHub instead, run the following command. Use at your own risk!

```r
install.packages("remotes")
remotes::install_github("dynverse/dyngen@devel", dependencies = TRUE)
```

## Step 2: Configure host system
It's recommended to let dyngen know where it can cache downloaded files and how many cores the host system has. 
If you don't perform these steps, running dyngen simulations will take a lot longer than it needs to.

To do so, start editing your Rprofile by running the following commands:

```r
install.packages("usethis")
usethis::edit_r_profile()
```

Inside your Rprofile, add the following lines:
```r
options(Ncpus = 8L) # change this to the number of cores in your system
options(dyngen_download_cache_dir = "~/.cache/dyngen")
```


## Vignettes
To learn about how dyngen, check out the example vignette below. Expected execution time for rerunning the code is about 5 minutes.

```{r vignettes, results='asis', echo=FALSE}
walk(
  list.files("vignettes", pattern = "*.Rmd"),
  function(file) {
    title <- 
      read_lines(paste0("vignettes/", file)) %>% 
      keep(~grepl("^title: ", .)) %>% 
      gsub("title: \"(.*)\"", "\\1", .)
    vignette_name <- gsub("\\.Rmd", "", file)
    markdown_name <- gsub("\\.Rmd", ".md", file)
    cat(
      "* ",
      ifelse(submission_to_cran, "", "["),
      title, 
      ifelse(submission_to_cran, "", paste0("](vignettes/", markdown_name, ")")),
      ":  \n",
      "`vignette(\"", vignette_name, "\", package=\"dyngen\")`\n",
      sep = ""
    )
  }
)
```

## Latest changes

Check out `news(package = "dyngen")` or [NEWS.md](NEWS.md) for a full list of changes.

<!-- This section gets automatically generated from NEWS.md -->

```{r news, echo=FALSE, results="asis"}
cat(dynutils::recent_news(n = 1))
```
